{
  "version": 3,
  "sources": ["../../../../src/lib/primitives/geometry/Polyline2d.ts"],
  "sourcesContent": ["import { Vec2d } from '../Vec2d'\nimport { Edge2d } from './Edge2d'\nimport { Geometry2d, Geometry2dOptions } from './Geometry2d'\n\n/** @public */\nexport class Polyline2d extends Geometry2d {\n\tpoints: Vec2d[]\n\n\tconstructor(config: Omit<Geometry2dOptions, 'isFilled' | 'isClosed'> & { points: Vec2d[] }) {\n\t\tsuper({ isClosed: false, isFilled: false, ...config })\n\t\tconst { points } = config\n\t\tthis.points = points\n\t}\n\n\t_segments?: Edge2d[]\n\n\tget segments() {\n\t\tif (!this._segments) {\n\t\t\tthis._segments = []\n\t\t\tconst { vertices } = this\n\t\t\tfor (let i = 0, n = vertices.length - 1; i < n; i++) {\n\t\t\t\tconst start = vertices[i]\n\t\t\t\tconst end = vertices[i + 1]\n\t\t\t\tthis._segments.push(new Edge2d({ start, end }))\n\t\t\t}\n\n\t\t\tif (this.isClosed) {\n\t\t\t\tthis._segments.push(new Edge2d({ start: vertices[vertices.length - 1], end: vertices[0] }))\n\t\t\t}\n\t\t}\n\n\t\treturn this._segments\n\t}\n\n\t_length?: number\n\n\tget length() {\n\t\tif (!this._length) {\n\t\t\tthis._length = this.segments.reduce((acc, segment) => acc + segment.length, 0)\n\t\t}\n\t\treturn this._length\n\t}\n\n\tgetVertices() {\n\t\treturn this.points\n\t}\n\n\tnearestPoint(A: Vec2d): Vec2d {\n\t\tlet nearest: Vec2d | undefined\n\t\tlet dist = Infinity\n\n\t\tif (this.points.length === 1) {\n\t\t\treturn this.points[0]\n\t\t}\n\n\t\tfor (const edge of this.segments) {\n\t\t\tconst p = edge.nearestPoint(A)\n\t\t\tconst d = p.dist(A)\n\t\t\tif (d < dist) {\n\t\t\t\tnearest = p\n\t\t\t\tdist = d\n\t\t\t}\n\t\t}\n\n\t\tif (!nearest) throw Error('nearest point not found')\n\t\treturn nearest\n\t}\n\n\thitTestLineSegment(A: Vec2d, B: Vec2d, zoom: number): boolean {\n\t\treturn this.segments.some((edge) => edge.hitTestLineSegment(A, B, zoom))\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,oBAAuB;AACvB,wBAA8C;AAGvC,MAAM,mBAAmB,6BAAW;AAAA,EAC1C;AAAA,EAEA,YAAY,QAAgF;AAC3F,UAAM,EAAE,UAAU,OAAO,UAAU,OAAO,GAAG,OAAO,CAAC;AACrD,UAAM,EAAE,OAAO,IAAI;AACnB,SAAK,SAAS;AAAA,EACf;AAAA,EAEA;AAAA,EAEA,IAAI,WAAW;AACd,QAAI,CAAC,KAAK,WAAW;AACpB,WAAK,YAAY,CAAC;AAClB,YAAM,EAAE,SAAS,IAAI;AACrB,eAAS,IAAI,GAAG,IAAI,SAAS,SAAS,GAAG,IAAI,GAAG,KAAK;AACpD,cAAM,QAAQ,SAAS,CAAC;AACxB,cAAM,MAAM,SAAS,IAAI,CAAC;AAC1B,aAAK,UAAU,KAAK,IAAI,qBAAO,EAAE,OAAO,IAAI,CAAC,CAAC;AAAA,MAC/C;AAEA,UAAI,KAAK,UAAU;AAClB,aAAK,UAAU,KAAK,IAAI,qBAAO,EAAE,OAAO,SAAS,SAAS,SAAS,CAAC,GAAG,KAAK,SAAS,CAAC,EAAE,CAAC,CAAC;AAAA,MAC3F;AAAA,IACD;AAEA,WAAO,KAAK;AAAA,EACb;AAAA,EAEA;AAAA,EAEA,IAAI,SAAS;AACZ,QAAI,CAAC,KAAK,SAAS;AAClB,WAAK,UAAU,KAAK,SAAS,OAAO,CAAC,KAAK,YAAY,MAAM,QAAQ,QAAQ,CAAC;AAAA,IAC9E;AACA,WAAO,KAAK;AAAA,EACb;AAAA,EAEA,cAAc;AACb,WAAO,KAAK;AAAA,EACb;AAAA,EAEA,aAAa,GAAiB;AAC7B,QAAI;AACJ,QAAI,OAAO;AAEX,QAAI,KAAK,OAAO,WAAW,GAAG;AAC7B,aAAO,KAAK,OAAO,CAAC;AAAA,IACrB;AAEA,eAAW,QAAQ,KAAK,UAAU;AACjC,YAAM,IAAI,KAAK,aAAa,CAAC;AAC7B,YAAM,IAAI,EAAE,KAAK,CAAC;AAClB,UAAI,IAAI,MAAM;AACb,kBAAU;AACV,eAAO;AAAA,MACR;AAAA,IACD;AAEA,QAAI,CAAC;AAAS,YAAM,MAAM,yBAAyB;AACnD,WAAO;AAAA,EACR;AAAA,EAEA,mBAAmB,GAAU,GAAU,MAAuB;AAC7D,WAAO,KAAK,SAAS,KAAK,CAAC,SAAS,KAAK,mBAAmB,GAAG,GAAG,IAAI,CAAC;AAAA,EACxE;AACD;",
  "names": []
}
